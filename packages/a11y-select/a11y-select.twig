<div class="a11y-select">
  <div class="a11y-select__fallback">
    <label class="a11y-select__fallback-label" for="a11y-select--fallback-select">
    {{ label }}
    </label>
    <select class="a11y-select__fallback-select" id="a11y-select--fallback-select">
      {% for option in options %}
        <option class="a11y-select__option" value="{{ option.value }}">{{ option.label }}</option>
      {% endfor %}
    </select>
  </div>

  <div class="a11y-select__enhanced">
    <div class="a11y-select__label" id="a11y-select--label">
      {{ label }}
    </div>
    <div class="a11y-select__combobox" aria-labelledby="a11y-select--label" id="a11y-select--enhanced-combobox" tabindex="0" aria-controls="a11y-select--listbox" aria-haspopup="listbox" role="combobox" aria-expanded="false">
      <div class="a11y-select__combobox-value">{{ empty_label }}</div>
      <div class="a11y-select__listbox" id="a11y-select--listbox" role="listbox" aria-labelledby="a11y-select--label" tabindex="-1">
        {% for option in [{value: '', label: empty_label }]|merge(options) %}
          {% if option.children %}
            <div class="a11y-select__group" role="group" aria-labelledby="a11y-select--group-{{ option.value }}">
              <div aria-hidden="true" role="presentation" id="a11y-select--group-{{ option.value }}">{{ option.label }}</div>
              {% for suboption in option.children %}
                <div class="a11y-select__option" id="{{ 'a11y-select--' ~ (suboption.value ?: 'empty-option') }}" {# data-native-value="{{ suboption.value }}" #} role="option" aria-selected="false">{{ suboption.label }}</div>
              {% endfor %}
            </div>
          {% else %}
            <div class="a11y-select__option" id="{{ 'a11y-select--' ~ (option.value ?: 'empty-option') }}" {# data-native-value="{{ option.value }}" #} role="option" aria-selected="{{ loop.first ? 'true' : 'false' }}">{{ option.label }}</div>
          {% endif %}
        {% endfor %}
      </div>
    </div>
  </div>
</div>
